<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MQTE286FTT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-MQTE286FTT');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapToSell — AI-Powered Marketplace Protection | Mark Wasmuth</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
    <meta name="description" content="SnapToSell uses AI to protect you from marketplace scams and helps you sell faster. Learn about investing or get early access.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="SnapToSell — Sell Safer, Smarter, Faster">
    <meta property="og:description" content="AI-powered fraud detection meets instant item pricing. Never get scammed on marketplace again.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://markwasmuth.com/snaptosell.html">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: {
                            50: '#f0f4f8', 100: '#d9e2ec', 200: '#bcccdc', 300: '#9fb3c8',
                            400: '#829ab1', 500: '#627d98', 600: '#486581', 700: '#334e68',
                            800: '#243b53', 900: '#102a43',
                        },
                        amber: {
                            50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d',
                            400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309',
                            800: '#92400e', 900: '#78350f',
                        },
                        warm: {
                            50: '#faf9f7', 100: '#f5f3f0', 200: '#e8e4de', 300: '#d6d0c7',
                            400: '#b8b0a3', 500: '#9a9184', 600: '#7d7568', 700: '#635c52',
                            800: '#4a453d', 900: '#332f2a',
                        }
                    },
                    fontFamily: {
                        'display': ['"Source Serif 4"', 'Georgia', 'serif'],
                        'body': ['"DM Sans"', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style>
        body { font-family: 'DM Sans', system-ui, sans-serif; }
        .font-display { font-family: 'Source Serif 4', Georgia, serif; }
        html { scroll-behavior: smooth; }
        .nav-blur { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
        .btn-primary { background: linear-gradient(135deg, #102a43 0%, #243b53 100%); transition: all 0.3s ease; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px -10px rgba(16, 42, 67, 0.5); }
        .card-lift { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card-lift:hover { transform: translateY(-8px); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15); }
        input:focus { outline: none; border-color: #d97706; box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.1); }
        .link-underline { position: relative; }
        .link-underline::after {
            content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 2px;
            background: #d97706; transition: width 0.3s ease;
        }
        .link-underline:hover::after { width: 100%; }
    </style>
</head>

<body class="bg-warm-50 text-navy-900">

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 nav-blur bg-warm-50/90 border-b border-warm-200">
        <div class="max-w-6xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="font-display text-xl font-bold tracking-tight text-navy-900">Mark Wasmuth</a>
                <div class="hidden md:flex items-center gap-8">
                    <a href="/#about" class="text-sm font-medium text-navy-700 hover:text-amber-600 transition">About</a>
                    <a href="/#paths" class="text-sm font-medium text-navy-700 hover:text-amber-600 transition">What I Do</a>
                    <a href="/#newsletter" class="text-sm font-medium text-navy-700 hover:text-amber-600 transition">Newsletter</a>
                    <a href="/#contact" class="text-sm font-medium text-navy-700 hover:text-amber-600 transition">Get in Touch</a>
                </div>
                <button id="mobile-menu-btn" class="md:hidden p-2 text-navy-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                </button>
            </div>
            <div id="mobile-menu" class="hidden md:hidden pt-4 pb-2">
                <div class="flex flex-col gap-4">
                    <a href="/#about" class="text-sm font-medium text-navy-700 py-2">About</a>
                    <a href="/#paths" class="text-sm font-medium text-navy-700 py-2">What I Do</a>
                    <a href="/#newsletter" class="text-sm font-medium text-navy-700 py-2">Newsletter</a>
                    <a href="/#contact" class="text-sm font-medium text-navy-700 py-2">Get in Touch</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-32 pb-20 bg-gradient-to-b from-warm-100 to-warm-50">
        <div class="max-w-6xl mx-auto px-6">
            <div class="flex flex-col-reverse md:flex-row items-center gap-10 md:gap-16">
                <!-- Text (left on desktop) -->
                <div class="flex-1 text-center md:text-left">
                    <h1 class="font-display text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-tight mb-6 text-navy-900">
                        Sell Safer, Smarter, Faster
                    </h1>
                    <p class="text-xl md:text-2xl text-navy-600 font-medium mb-4">
                        Let AI multiply your results. Not your hours.
                    </p>
                    <p class="text-base md:text-lg text-navy-500 mb-10 leading-relaxed">
                        Snap a photo, get instant pricing, list everywhere in 2 minutes.<br class="hidden md:inline">
                        Built-in fraud protection keeps you safe. Speed is important.<br class="hidden md:inline">
                        Trust is essential.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                        <a href="#get-involved" class="btn-primary text-white px-8 py-4 rounded-lg font-semibold text-center">
                            Get Early Access
                        </a>
                        <a href="#how-it-works" class="px-8 py-4 rounded-lg font-semibold text-navy-800 border-2 border-navy-800 hover:bg-navy-900 hover:text-white transition text-center">
                            See How It Works
                        </a>
                    </div>
                </div>
                <!-- Logo (right on desktop) -->
                <div class="flex-shrink-0">
                    <div class="bg-white rounded-3xl shadow-xl p-10 md:p-12">
                        <img src="/snaptosell-logo.png" alt="SnapToSell" class="w-72 h-72 md:w-96 md:h-96 mx-auto" />
                        <p class="text-center mt-6 text-5xl md:text-6xl font-bold tracking-tight">
                            <span class="text-navy-900">Snap</span><span class="text-amber-600">To</span><span class="text-navy-900">Sell</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Problem Section -->
    <section class="py-20 bg-white">
        <div class="max-w-4xl mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="font-display text-3xl md:text-4xl font-bold text-navy-900 mb-6">The Problem We're Solving</h2>
            </div>
            <div class="space-y-6 text-lg text-navy-600 leading-relaxed">
                <p>
                    Every day, thousands of people get scammed on Facebook Marketplace, OfferUp, and Craigslist. Fake payment screenshots. Items that never ship. Profiles that vanish after they have your money.
                </p>
                <p>
                    The platforms don't protect you. They say it's "not their responsibility." And when you lose $600 on a fake iPhone listing, you're on your own.
                </p>
                <p>
                    <strong>SnapToSell is different.</strong> We built AI that detects scams before they reach you. We verify sellers. We guarantee your transaction. And if something goes wrong, we make it right.
                </p>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-20 bg-warm-100">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="font-display text-3xl md:text-4xl font-bold text-navy-900 mb-6">What Makes SnapToSell Different</h2>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white rounded-2xl p-8 shadow-lg card-lift">
                    <div class="w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-amber-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                    </div>
                    <h3 class="font-display text-xl font-bold text-navy-900 mb-3">AI Scam Detection</h3>
                    <p class="text-navy-600">Our AI analyzes 50+ fraud indicators in real-time, blocking scams before they ever reach you.</p>
                </div>
                <div class="bg-white rounded-2xl p-8 shadow-lg card-lift">
                    <div class="w-14 h-14 bg-navy-100 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-navy-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                    </div>
                    <h3 class="font-display text-xl font-bold text-navy-900 mb-3">Instant Pricing</h3>
                    <p class="text-navy-600">Snap a photo and our AI identifies your item, suggests the best price, and creates your listing in seconds.</p>
                </div>
                <div class="bg-white rounded-2xl p-8 shadow-lg card-lift">
                    <div class="w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-amber-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    </div>
                    <h3 class="font-display text-xl font-bold text-navy-900 mb-3">100% Guarantee</h3>
                    <p class="text-navy-600">If you get scammed on SnapToSell, we refund your money. Period. Unlike other platforms, we actually protect you.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Two Paths Section -->
    <section id="get-involved" class="py-24 bg-navy-900 text-white">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-16">
                <p class="text-amber-400 font-semibold mb-4 tracking-wide uppercase text-sm">Get Involved</p>
                <h2 class="font-display text-3xl md:text-4xl font-bold mb-6">Two Ways to Join the Journey</h2>
                <p class="text-lg text-navy-200 max-w-2xl mx-auto">Whether you want to use SnapToSell or invest in its future, we'd love to hear from you.</p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Investor Path -->
                <div class="bg-navy-800/50 backdrop-blur rounded-2xl p-8 md:p-10">
                    <div class="w-14 h-14 bg-amber-500/20 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                    </div>
                    <h3 class="font-display text-2xl font-bold mb-4">For Investors</h3>
                    <p class="text-navy-200 mb-6">Interested in the future of AI-powered marketplace protection? Learn about investment opportunities in SnapToSell.</p>
                    <form id="investor-form" class="space-y-4">
                        <input type="hidden" name="interest" value="investor">
                        <input type="email" name="email" required class="w-full px-4 py-3 bg-navy-700 border border-navy-600 rounded-lg text-white placeholder-navy-400" placeholder="Your email">
                        <input type="text" name="name" required class="w-full px-4 py-3 bg-navy-700 border border-navy-600 rounded-lg text-white placeholder-navy-400" placeholder="Your name">
                        <button type="submit" class="w-full bg-amber-500 hover:bg-amber-600 text-navy-900 font-bold py-3 px-6 rounded-lg transition">Learn About Investing</button>
                    </form>
                    <div id="investor-success" class="hidden mt-4 text-center">
                        <p class="text-amber-400 font-semibold">Thanks! We'll be in touch with investment details.</p>
                    </div>
                </div>
                
                <!-- User Path -->
                <div class="bg-navy-800/50 backdrop-blur rounded-2xl p-8 md:p-10">
                    <div class="w-14 h-14 bg-navy-600/50 rounded-xl flex items-center justify-center mb-6">
                        <svg class="w-7 h-7 text-navy-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                    </div>
                    <h3 class="font-display text-2xl font-bold mb-4">For Users</h3>
                    <p class="text-navy-200 mb-6">Want to be notified when SnapToSell is ready? Join the waitlist and get early access to the platform.</p>
                    <form id="user-form" class="space-y-4">
                        <input type="hidden" name="interest" value="user">
                        <input type="email" name="email" required class="w-full px-4 py-3 bg-navy-700 border border-navy-600 rounded-lg text-white placeholder-navy-400" placeholder="Your email">
                        <input type="text" name="name" class="w-full px-4 py-3 bg-navy-700 border border-navy-600 rounded-lg text-white placeholder-navy-400" placeholder="Your name (optional)">
                        <button type="submit" class="w-full bg-white hover:bg-navy-100 text-navy-900 font-bold py-3 px-6 rounded-lg transition">Get Early Access</button>
                    </form>
                    <div id="user-success" class="hidden mt-4 text-center">
                        <p class="text-amber-400 font-semibold">You're on the list! We'll notify you when we launch.</p>
                    </div>
                </div>
            </div>
            
            <!-- Secondary link to snaptosell.com -->
            <div class="mt-12 text-center">
                <p class="text-navy-300 mb-4">Want to explore the app now?</p>
                <a href="https://snaptosell.com" target="_blank" class="inline-flex items-center gap-2 text-amber-400 hover:text-amber-300 font-semibold transition">
                    Visit SnapToSell.com
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-navy-900 text-white py-12 border-t border-navy-800">
        <div class="max-w-6xl mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <div>
                    <p class="font-display text-lg font-bold">SnapToSell</p>
                    <p class="text-navy-400 text-sm">A Smart Brands Inc. venture</p>
                </div>
                <div class="flex gap-6">
                    <a href="https://snaptosell.com" target="_blank" class="text-navy-300 hover:text-white transition">SnapToSell.com</a>
                    <a href="/" class="text-navy-300 hover:text-white transition">Back to MarkWasmuth.com</a>
                </div>
            </div>
            <div class="border-t border-navy-800 mt-8 pt-8 text-center">
                <p class="text-navy-400 text-sm">© 2026 Smart Brands Inc. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
        mobileMenu.querySelectorAll('a').forEach(link => { link.addEventListener('click', () => { mobileMenu.classList.add('hidden'); }); });
        
        // Beehiiv subscribe helper
        async function subscribeToBeehiiv(email) {
            const formData = new FormData();
            formData.append('email', email);
            try {
                await fetch('https://subscribe-forms.beehiiv.com/subscribe/46138cde-ade1-4aaf-bfe6-f3417d089dd5', {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors'
                });
            } catch (err) {
                // Request sent even if CORS blocks response
            }
        }

        // Investor form
        const investorForm = document.getElementById('investor-form');
        const investorSuccess = document.getElementById('investor-success');
        investorForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = investorForm.querySelector('input[name="email"]').value;
            const submitBtn = investorForm.querySelector('button[type="submit"]');
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
            await subscribeToBeehiiv(email);
            investorForm.classList.add('hidden');
            investorSuccess.classList.remove('hidden');
        });

        // User form
        const userForm = document.getElementById('user-form');
        const userSuccess = document.getElementById('user-success');
        userForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = userForm.querySelector('input[name="email"]').value;
            const submitBtn = userForm.querySelector('button[type="submit"]');
            submitBtn.textContent = 'Signing up...';
            submitBtn.disabled = true;
            await subscribeToBeehiiv(email);
            userForm.classList.add('hidden');
            userSuccess.classList.remove('hidden');
        });
    </script>

<<<<<<< Updated upstream
=======
        <!-- LAUNCH MILESTONES -->
        <div class="section-header">
          <div class="section-dot purple"></div>
          <div class="section-title">&#127919; Launch Milestones</div>
          <div class="section-count" id="milestonesCount">0 items</div>
        </div>
        <div id="milestones"></div>
      </div>

    </div><!-- /.two-col -->

    <div class="updated-bar">
      Last updated by Marcus Steele &middot; February 26, 2026 &middot; Auto-refreshes every 60s &nbsp;&middot;&nbsp; <a href="/cc" style="color:#334155;text-decoration:none;">&#8592; Mission Control</a>
    </div>

  </div><!-- /.main-content -->
</div><!-- /#dashboard -->

<style>
  /* INTERACTIVE ADDITIONS */
  .task-row { cursor: pointer; position: relative; }
  .task-row:hover .task-actions { opacity: 1; }
  .task-actions { display: flex; align-items: center; gap: 6px; flex-shrink: 0; opacity: 0.5; transition: opacity 0.15s; }
  .btn-complete {
    width: 20px; height: 20px; border-radius: 5px;
    border: 2px solid #475569; background: transparent;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: all 0.2s; flex-shrink: 0;
  }
  .btn-complete:hover { border-color: #22c55e; background: rgba(34,197,94,0.1); }
  .btn-complete.checked { border-color: #22c55e; background: #22c55e; }
  .btn-complete.checked::after { content: ''; display: block; width: 5px; height: 9px; border: 2px solid #fff; border-top: none; border-left: none; transform: rotate(45deg) translate(-1px,-1px); }
  .btn-comment {
    font-size: 0.7rem; color: #475569; background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.08); border-radius: 5px;
    padding: 2px 7px; cursor: pointer; transition: all 0.15s; white-space: nowrap;
  }
  .btn-comment:hover { background: rgba(255,255,255,0.1); color: #94a3b8; }
  .btn-comment.has-comments { color: #60a5fa; border-color: rgba(96,165,250,0.3); }

  .comment-panel {
    display: none; margin-top: 10px; padding-top: 10px;
    border-top: 1px solid rgba(255,255,255,0.06);
  }
  .comment-panel.open { display: block; }
  .comment-item { display: flex; gap: 8px; margin-bottom: 10px; }
  .comment-avatar {
    width: 24px; height: 24px; border-radius: 50%; flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.65rem; font-weight: 700; text-transform: uppercase;
  }
  .avatar-mark   { background: rgba(96,165,250,0.25);  color: #93c5fd; }
  .avatar-vigen  { background: rgba(192,132,252,0.25); color: #d8b4fe; }
  .avatar-terry  { background: rgba(251,146,60,0.25);  color: #fdba74; }
  .avatar-jake   { background: rgba(34,197,94,0.25);   color: #86efac; }
  .avatar-marcus { background: rgba(255,107,0,0.25);   color: #fb923c; }
  .avatar-arno   { background: rgba(20,184,166,0.25);  color: #5eead4; }
  .avatar-team   { background: rgba(148,163,184,0.2);  color: #94a3b8; }
  .comment-body { flex: 1; }
  .comment-meta { font-size: 0.68rem; color: #475569; margin-bottom: 3px; }
  .comment-meta strong { color: #94a3b8; }
  .comment-text { font-size: 0.82rem; color: #cbd5e1; line-height: 1.5; }

  .comment-input-row { display: flex; gap: 8px; margin-top: 8px; align-items: flex-end; }
  .comment-textarea {
    flex: 1; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px; color: #f1f5f9; font-size: 0.82rem; font-family: inherit;
    padding: 8px 12px; resize: none; min-height: 36px; max-height: 120px;
    outline: none; line-height: 1.4;
  }
  .comment-textarea:focus { border-color: rgba(255,107,0,0.4); }
  .btn-voice {
    width: 34px; height: 34px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);
    background: rgba(255,255,255,0.04); color: #64748b; cursor: pointer;
    display: flex; align-items: center; justify-content: center; font-size: 0.9rem;
    transition: all 0.2s; flex-shrink: 0;
  }
  .btn-voice:hover { border-color: rgba(255,107,0,0.4); color: #fb923c; }
  .btn-voice.listening { background: rgba(239,68,68,0.15); border-color: #ef4444; color: #f87171; animation: pulse 1s infinite; }
  @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }
  .btn-send {
    height: 34px; padding: 0 14px; border-radius: 8px; border: none;
    background: #ff6b00; color: #fff; font-size: 0.78rem; font-weight: 700;
    font-family: inherit; cursor: pointer; transition: background 0.2s; flex-shrink: 0;
  }
  .btn-send:hover { background: #ff8533; }
  .no-access { font-size: 0.72rem; color: #334155; font-style: italic; margin-top: 6px; }
</style>

<script>
const SB_URL = 'https://cmdcitqfrzfmeghrvily.supabase.co';
const SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNtZGNpdHFmcnpmbWVnaHJ2aWx5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzOTgwMDIsImV4cCI6MjA4NTk3NDAwMn0.wrx599rkgJeSTa4N15DRSn4Tp1_3vrtwx2XF7HEviMo';

/*  == USERS == */
const USERS = {
  'Grizzly123': { role: 'mark',   label: 'Mark',   canComplete: true,  canComment: true },
  'STS-Vigen':  { role: 'vigen',  label: 'Vigen',  canComplete: true,  canComment: true },
  'STS-Terry':  { role: 'terry',  label: 'Terry',  canComplete: false, canComment: true },
  'STS-Jake':   { role: 'jake',   label: 'Jake',   canComplete: false, canComment: true },
  'STS-Arno':   { role: 'arno',   label: 'Arno',   canComplete: true,  canComment: true },
  'STS-Team':   { role: 'team',   label: 'Team',   canComplete: false, canComment: false }
};
let currentUser = null;

/*  == AUTH == */
function checkPw() {
  const v = document.getElementById('pwInput').value.trim();
  if (USERS[v]) {
    localStorage.setItem('sts_auth', v);
    currentUser = USERS[v];
    launch();
  } else {
    document.getElementById('pwError').style.display = 'block';
  }
}
function launch() {
  document.getElementById('passwordScreen').style.display = 'none';
  document.getElementById('dashboard').style.display = 'block';
  init();
  setInterval(loadAndRender, 60000);
}
function autoLogin() {
  const saved = localStorage.getItem('sts_auth');
  if (saved && USERS[saved]) {
    currentUser = USERS[saved];
    launch();
    return true;
  }
  return false;
}
if (!autoLogin()) { /* show password screen */ }

/*  == TASK CACHE (avoids JSON-in-onclick escaping issues) == */
const taskCache = {};

/*  == SUPABASE HELPERS == */
const SB_H = { 'Content-Type':'application/json', apikey: SB_KEY, Authorization: 'Bearer ' + SB_KEY };

async function fetchTasks() {
  const res = await fetch(`${SB_URL}/rest/v1/agent_tasks?to_agent=eq.sts_tracker&limit=300&order=created_at.asc`, { headers: SB_H });
  if (!res.ok) return [];
  return (await res.json()).map(r => {
    let ctx = {};
    try { ctx = JSON.parse(r.context || '{}'); } catch(e) {}
    const completedAt  = r.completed_at ? new Date(r.completed_at) : null;
    const completedStr = completedAt ? completedAt.toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}) : null;
    const t = {
      id: r.id,
      col: ctx.col || 'app-pending',
      name: r.task.replace(/^\[STS:[^\]]+\]\s*/,''),
      owner: ctx.owner || 'team',
      note: ctx.note || '',
      comments: ctx.comments || [],
      status: r.status,
      completedStr,
      ctx
    };
    taskCache[r.id] = t;
    return t;
  });
}

async function patchTask(id, body) {
  await fetch(`${SB_URL}/rest/v1/agent_tasks?id=eq.${id}`, {
    method:'PATCH', headers: SB_H, body: JSON.stringify(body)
  });
}

/*  == MARK COMPLETE == */
async function toggleComplete(id) {
  if (!currentUser || !currentUser.canComplete) return;
  const t = taskCache[id];
  if (!t) return;
  const isDone  = t.status === 'done';
  const newStat = isDone ? 'active' : 'done';
  const newCtx  = { ...t.ctx, col: isDone ? (t.ctx._prevCol || 'app-active') : 'app-done' };
  if (!isDone) newCtx._prevCol = t.ctx.col;
  await patchTask(id, {
    status: newStat,
    context: JSON.stringify(newCtx),
    completed_at: isDone ? null : new Date().toISOString()
  });
  loadAndRender();
}

/*  == COMMENTS == */
async function submitComment(id, textareaEl) {
  const text = textareaEl.value.trim();
  if (!text || !currentUser) return;
  const t = taskCache[id];
  if (!t) return;
  const comments = [...(t.ctx.comments || [])];
  comments.push({ user: currentUser.role, label: currentUser.label, text, ts: new Date().toISOString() });
  const newCtx = { ...t.ctx, comments };
  await patchTask(id, { context: JSON.stringify(newCtx) });
  textareaEl.value = '';
  loadAndRender();
}

/*  == VOICE INPUT == */
let activeVoiceBtn = null;
let recognition    = null;
function startVoice(btn, textareaEl) {
  const SpeechRec = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (!SpeechRec) { alert('Voice not supported in this browser. Try Chrome.'); return; }
  if (recognition) { recognition.stop(); return; }
  recognition = new SpeechRec();
  recognition.continuous = false;
  recognition.interimResults = false;
  recognition.lang = 'en-US';
  btn.classList.add('listening');
  activeVoiceBtn = btn;
  recognition.onresult = e => {
    textareaEl.value += (textareaEl.value ? ' ' : '') + e.results[0][0].transcript;
  };
  recognition.onend = () => {
    btn.classList.remove('listening');
    recognition = null;
    activeVoiceBtn = null;
  };
  recognition.start();
}

/*  == TOGGLE COMMENT PANEL == */
function togglePanel(panelEl) {
  panelEl.classList.toggle('open');
}

/*  == RENDER == */
const rowClass = {
  'app-done':'done','app-active':'active','app-pending':'pending','app-blocked':'blocked',
  mkt1:'active',mkt2:'pending',mkt3:'pending',milestones:'milestone'
};
const containers = {
  'app-done':'appDone','app-active':'appActive','app-pending':'appPending','app-blocked':'appBlocked',
  mkt1:'mkt1',mkt2:'mkt2',mkt3:'mkt3',milestones:'milestones'
};
const counters = {
  'app-done':'appDoneCount','app-active':'appActiveCount','app-pending':'appPendingCount','app-blocked':'appBlockedCount',
  mkt1:'mkt1Count',mkt2:'mkt2Count',mkt3:'mkt3Count',milestones:'milestonesCount'
};

function fmtTs(ts) {
  if (!ts) return '';
  const d = new Date(ts);
  return d.toLocaleDateString('en-US',{month:'short',day:'numeric'}) + ' ' + d.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'});
}

function renderComments(comments) {
  if (!comments || !comments.length) return '<div style="font-size:0.75rem;color:#334155;margin-bottom:8px;">No comments yet.</div>';
  return comments.map(c => `
    <div class="comment-item">
      <div class="comment-avatar avatar-${c.user}">${(c.label||c.user).substring(0,2).toUpperCase()}</div>
      <div class="comment-body">
        <div class="comment-meta"><strong>${c.label || c.user}</strong> &nbsp;&middot;&nbsp; ${fmtTs(c.ts)}</div>
        <div class="comment-text">${c.text}</div>
      </div>
    </div>`).join('');
}

function renderTask(t, colKey) {
  const cls        = rowClass[colKey] || 'pending';
  const isDone     = cls === 'done';
  const commentCnt = (t.comments || []).length;
  const commentLbl = commentCnt ? `&#128172; ${commentCnt}` : '&#128172; Comment';
  const panelId    = `panel-${t.id}`;
  const taId       = `ta-${t.id}`;
  const vbId       = `vb-${t.id}`;

  const canComplete = currentUser && currentUser.canComplete;
  const canComment  = currentUser && currentUser.canComment;

  const checkBtn = canComplete ? `
    <button class="btn-complete ${isDone ? 'checked' : ''}"
      onclick="event.stopPropagation();toggleComplete('${t.id}')"
      title="${isDone ? 'Mark as not done' : 'Mark as complete'}"></button>` : '';

  const commentBtn = `
    <button class="btn-comment ${commentCnt ? 'has-comments' : ''}"
      onclick="event.stopPropagation();togglePanel(document.getElementById('${panelId}'))">
      ${commentLbl}
    </button>`;

  const inputRow = canComment ? `
    <div class="comment-input-row">
      <textarea id="${taId}" class="comment-textarea" placeholder="Add a comment..." rows="1"
        oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
      <button id="${vbId}" class="btn-voice" title="Voice input"
        onclick="startVoice(document.getElementById('${vbId}'),document.getElementById('${taId}'))">&#127908;</button>
      <button class="btn-send"
        onclick="submitComment('${t.id}',document.getElementById('${taId}'))">Send</button>
    </div>` : `<div class="no-access">Sign in with your access code to comment.</div>`;

  const doneStamp = (isDone && t.completedStr)
    ? `<div class="task-note" style="color:#22c55e;opacity:0.8;">&#10003; Completed ${t.completedStr}</div>` : '';
  const noteHtml = t.note ? `<div class="task-note">${t.note}</div>` : '';
  const ownerTag = t.owner ? `<span class="tag ${t.owner}">${t.owner.toUpperCase()}</span>` : '';

  return `
    <div class="task-row ${cls}" onclick="togglePanel(document.getElementById('${panelId}'))">
      <div class="task-body" style="flex:1;min-width:0;">
        <div style="display:flex;align-items:flex-start;gap:10px;">
          <div style="flex:1;min-width:0;">
            <div class="task-name">${t.name}</div>
            ${noteHtml}${doneStamp}
          </div>
          <div class="task-actions" onclick="event.stopPropagation()">
            ${checkBtn}
            ${ownerTag}
            ${commentBtn}
          </div>
        </div>
        <div id="${panelId}" class="comment-panel">
          ${renderComments(t.comments)}
          ${inputRow}
        </div>
      </div>
    </div>`;
}

async function loadAndRender() {
  const tasks = await fetchTasks();
  const groups = {};
  tasks.forEach(t => { if (!groups[t.col]) groups[t.col] = []; groups[t.col].push(t); });

  Object.keys(containers).forEach(k => {
    const items = groups[k] || [];
    const el  = document.getElementById(containers[k]);
    const cnt = document.getElementById(counters[k]);
    if (el)  el.innerHTML = items.map(t => renderTask(t, k)).join('');
    if (cnt) cnt.textContent = `${items.length} item${items.length !== 1 ? 's' : ''}`;
  });

  const done    = (groups['app-done']    || []).length;
  const active  = (groups['app-active']  || []).length;
  const pending = (groups['app-pending'] || []).length;
  const blocked = (groups['app-blocked'] || []).length;
  const total   = done + active + pending + blocked;
  const pct     = total ? Math.round((done / total) * 100) : 0;

  document.getElementById('cntDone').textContent    = done;
  document.getElementById('cntActive').textContent  = active;
  document.getElementById('cntPending').textContent = pending;
  document.getElementById('cntBlocked').textContent = blocked;
  document.getElementById('progressPct').textContent = pct + '%';
  setTimeout(() => { document.getElementById('progressFill').style.width = pct + '%'; }, 100);

  const who = currentUser ? ` &nbsp;&middot;&nbsp; Signed in as <strong style="color:#94a3b8">${currentUser.label}</strong>` : '';
  document.querySelector('.updated-bar').innerHTML =
    `Refreshed ${new Date().toLocaleTimeString()}${who} &nbsp;&middot;&nbsp; <a href="/cc" style="color:#334155;text-decoration:none;">&#8592; Mission Control</a>`;
}

function init() {
  const diff = Math.ceil((new Date('2026-04-21T09:00:00-04:00') - new Date()) / 86400000);
  document.getElementById('daysLeft').textContent = diff > 0 ? diff : '0';
  loadAndRender();
}
</script>
>>>>>>> Stashed changes
</body>
</html>
